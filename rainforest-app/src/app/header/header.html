<nav
  class="fixed top-4 left-1/2 -translate-x-1/2 px-6 z-50 bg-white/80 backdrop-blur-md border border-gray-200 shadow-sm flex items-center transition-all duration-300"
  [ngClass]="{
    'w-96 h-14 rounded-[28px]': (!isLoading && !message && !isMessageExiting) || isMessageExiting,
    'w-42 h-42 rounded-[40px]': isLoading,
    'w-[32rem] h-28 rounded-[56px]': message && !isLoading && !isMessageExiting
  }">
  <div class="flex items-center justify-between relative w-full">
    <a
      routerLink="/"
      class="text-lg font-semibold text-gray-800 transition-all duration-300 ease-out"
      [ngClass]="{
        'opacity-0 blur-sm translate-x-4 scale-95': isLoading || (message && !isMessageExiting),
        'opacity-100 blur-0 translate-x-0 scale-100': !isLoading && (!message || isMessageExiting)
      }">
      Rainforest
    </a>

    @if (isLoading) {
      <div class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center gap-2 animate-fade-in-scale">
        <div class="animate-spin rounded-full h-14 w-14 border-b-6 border-red-600"></div>
        <span class="text-md text-gray-500 font-medium whitespace-nowrap">Loading...</span>
      </div>
    }

    @if (message && !isLoading) {
      <div class="absolute left-0 right-0 flex items-center justify-between gap-6"
           [ngClass]="isMessageExiting ? 'animate-fade-out-scale' : 'animate-fade-in-scale'">
        <div class="flex items-center gap-5 min-w-0">
          <span
            class="material-icons flex-shrink-0"
            [style.font-size]="'4rem'"
            [ngClass]="{
              'text-emerald-600': message.variant === 'success',
              'text-red-600': message.variant === 'error',
              'text-blue-600': message.variant === 'info' || !message.variant
            }">
            {{ message.icon }}
          </span>
          <div class="min-w-0 flex-1">
            <div
              class="font-bold text-2xl leading-none mb-2"
              [ngClass]="{
                'text-emerald-900': message.variant === 'success',
                'text-red-900': message.variant === 'error',
                'text-blue-900': message.variant === 'info' || !message.variant
              }">
              {{ message.title }}
            </div>
            <div class="text-base text-gray-600 leading-none truncate">{{ message.message }}</div>
          </div>
        </div>
        @if (message.rightText) {
          <div class="text-base text-gray-500 font-medium whitespace-nowrap flex-shrink-0">
            {{ message.rightText }}
          </div>
        }
      </div>
    }

    <a
      routerLink="/cart"
      class="w-10 h-10 rounded-full hover:bg-gray-100 transition-all duration-300 ease-out flex items-center justify-center"
      [ngClass]="{
        'opacity-0 blur-sm -translate-x-4 scale-95': isLoading || (message && !isMessageExiting),
        'opacity-100 blur-0 translate-x-0 scale-100': !isLoading && (!message || isMessageExiting)
      }">
      <span class="material-icons text-gray-700 text-2xl">shopping_cart</span>
    </a>
  </div>
</nav>